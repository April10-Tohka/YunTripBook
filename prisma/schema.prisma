generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  user_id       String    @id @default(dbgenerated("(uuid())")) @db.Char(36)
  user_name     String?   @default("尊敬的会员") @db.VarChar(50)
  phone         String?   @unique(map: "user_unique_key_phone") @db.Char(11)
  password_hash String?   @db.Char(60)
  create_at     DateTime? @default(dbgenerated("(now())")) @db.Timestamp(0)
  gender        String?   @db.Char(2)
  birthdate     DateTime? @db.Date
  email         String?   @db.VarChar(17)
  last_login    DateTime? @db.Timestamp(0)
  avatar_url    String?   @default("https://dimg04.c-ctrip.com/images/0AS1k120009l60yh36D69.jpg") @db.VarChar(100)
  update_at     DateTime? @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model passenger {
  passenger_id             Int?
  passenger_name           String? @db.VarChar(20)
  passenger_phone          String? @db.Char(11)
  passenger_id_card_number String? @db.Char(18)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model flight {
  flight_no             String    @db.VarChar(8)
  aircraft_type         String?   @db.Char(3)
  depart_time           DateTime? @db.Time(0)
  arrive_time           DateTime? @db.Time(0)
  depart_city_code      String    @db.Char(3)
  depart_port_name      String?   @db.VarChar(10)
  depart_port_code      String?   @db.Char(3)
  depart_terminal       String?   @db.Char(2)
  arrive_city_code      String    @db.Char(3)
  arrive_port_name      String?   @db.VarChar(10)
  arrive_port_code      String?   @db.Char(3)
  arrive_terminal       String?   @db.Char(2)
  depart_date           DateTime? @db.Date
  on_time_rate          String?   @db.VarChar(4)
  price                 Float?    @db.Float
  airline_company_name  String?   @db.VarChar(10)
  airline_code          String?   @db.Char(2)
  current_week_schedule Json?
  stop_city_name        String?   @db.VarChar(10)
  week_schedule_str     String    @db.VarChar(255)

  @@id([flight_no, week_schedule_str, arrive_city_code, depart_city_code])
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model order {
  order_id             String                @id @db.Char(36)
  order_status         Int?                  @default(0)
  user_id              String                @db.VarChar(36)
  passenger_name       String                @db.VarChar(20)
  passenger_identity   String                @db.Char(18)
  passenger_phone      String                @db.Char(11)
  flight_no            String                @db.Char(6)
  depart               String?               @db.VarChar(20)
  arrive               String?               @db.VarChar(20)
  depart_date          DateTime?             @db.Date
  price                Int?
  airline_company_name String?               @db.VarChar(20)
  depart_port_name     String?               @db.VarChar(20)
  depart_time          DateTime?             @db.Time(0)
  arrive_port_name     String?               @db.VarChar(20)
  arrive_time          DateTime?             @db.Time(0)
  create_at            DateTime?             @default(now()) @db.Timestamp(0)
  update_at            DateTime?             @default(now()) @db.Timestamp(0)
  payment_method       String?               @db.Char(14)
  order_status_change  order_status_change[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model order_status_change {
  id          Int       @id @default(autoincrement())
  order_id    String?   @db.Char(36)
  old_status  Int?
  new_status  Int?
  change_time DateTime? @db.Timestamp(0)
  order       order?    @relation(fields: [order_id], references: [order_id], onDelete: NoAction, onUpdate: NoAction, map: "order_status_change_order_order_id_fk")

  @@index([order_id], map: "order_status_change_order_order_id_fk")
}
